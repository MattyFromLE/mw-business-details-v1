function getMap(){var e=null,a=addresses.address,t=addresses.latitude,s=addresses.longitude,r=addresses.googleMapsLink,l=new google.maps.LatLng(t,s),i=l;google.maps.Map.prototype.setCenterWithOffset=function(e,a,t){var s=this,r=new google.maps.OverlayView;r.onAdd=function(){var r=this.getProjection(),l=r.fromLatLngToContainerPixel(e);l.x=l.x+a,l.y=l.y+t,s.setCenter(r.fromContainerPixelToLatLng(l))},r.draw=function(){},r.setMap(this)};var o={zoom:parseInt(mw_map_vars.zoom),minZoom:0,maxZoom:20,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},center:l,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,panControl:!1,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,rotateControl:!1},n=new google.maps.Map(document.getElementById("map-wrapper"),o);if(google.maps.event.addDomListener(window,"resize",function(){n.setCenter(i)}),"custom"==pinOrCustom)var p=new google.maps.MarkerImage(""+pinImage,null,null,null,new google.maps.Size(parseInt(mw_map_vars.markerWidth),parseInt(mw_map_vars.markerHeight)));else var p=new google.maps.MarkerImage(pluginUrl+"/image/map-marker.png",null,null,null,new google.maps.Size(46,71));var y=new google.maps.Marker({position:l,icon:p,map:n,title:"Click to view in Google Maps"});if("radius"==mapMarker){y.setVisible(!1),radiusCalc=mile*radius,radiusColour&&(radiusHex=radiusColour);var m=new google.maps.Circle({map:n,radius:radiusCalc,fillColor:radiusHex,fillOpacity:.5,strokeColor:"#CD0000",strokeOpacity:0});m.bindTo("center",y,"position")}var f=new google.maps.InfoWindow({content:"<h3>"+addressName+'</h3><p class="map-address">'+a+'</p><p><a target="_blank" href="'+r+'"> View on Google Maps</a></p>'});if("show"==mw_map_vars.showInfoWindow?(f.open(n,y),google.maps.event.addListener(y,"click",function(){null!=e&&e.close(),f.open(n,y),e=f}),n.setCenterWithOffset(i,0,-110),google.maps.event.addDomListener(window,"resize",function(){n.setCenterWithOffset(i,0,-110)})):google.maps.event.addListener(y,"click",function(){f.open(n,y)}),"colourful"===mapStyle)var u=[{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"},{lightness:20}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{hue:"#a1cdfc"},{saturation:30},{lightness:49}]},{featureType:"road.highway",elementType:"geometry",stylers:[{hue:"#f49935"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#fad959"}]}];else if("grey"===mapStyle)var u=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}];else if("pale"===mapStyle)var u=[{featureType:"water",stylers:[{visibility:"on"},{color:"#acbcc9"}]},{featureType:"landscape",stylers:[{color:"#f2e5d4"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"administrative",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"road"},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{},{featureType:"road",stylers:[{lightness:20}]}];else if("custom"===mapStyle)var u=jQuery.parseJSON(mw_map_vars.customMap);n.setOptions({styles:u})}function getMultiMap(){var e=null,a={zoom:parseInt(mw_map_vars.zoom),minZoom:0,maxZoom:20,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,panControl:!1,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,rotateControl:!1};if("custom"==pinOrCustom)var t=new google.maps.MarkerImage(""+pinImage,null,null,null,new google.maps.Size(parseInt(mw_map_vars.markerWidth),parseInt(mw_map_vars.markerHeight)));else var t=new google.maps.MarkerImage(pluginUrl+"/image/map-marker.png",null,null,null,new google.maps.Size(46,71));for(var s=new google.maps.Map(document.getElementById("map-wrapper"),a),r=new google.maps.LatLngBounds,l=(new google.maps.InfoWindow,0);l<addresses.length;l++){var i=new google.maps.Marker({map:s,position:new google.maps.LatLng(addresses[l].latitude,addresses[l].longitude),icon:t});google.maps.event.addListener(i,"click",function(a,t){return function(){var r=addresses[t].name;console.log(r);var l=new google.maps.InfoWindow({content:"<h3>"+r+'</h3><p class="map-address">'+addresses[t].address+'</p><p><a target="_blank" href="'+addresses[t].googleMapsLink+'"> View on Google Maps</a></p>'});null!=e&&e.close(),l.open(s,a),e=l}}(i,l)),r.extend(i.position)}if(s.fitBounds(r),"colourful"===mapStyle)var o=[{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"},{lightness:20}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{hue:"#a1cdfc"},{saturation:30},{lightness:49}]},{featureType:"road.highway",elementType:"geometry",stylers:[{hue:"#f49935"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#fad959"}]}];else if("grey"===mapStyle)var o=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}];else if("pale"===mapStyle)var o=[{featureType:"water",stylers:[{visibility:"on"},{color:"#acbcc9"}]},{featureType:"landscape",stylers:[{color:"#f2e5d4"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"administrative",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"road"},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{},{featureType:"road",stylers:[{lightness:20}]}];else if("custom"===mapStyle)var o=jQuery.parseJSON(mw_map_vars.customMap);s.setOptions({styles:o})}var addressName=mw_map_vars.addressName,mapStyle=mw_map_vars.mapStyle,mapMarker=mw_map_vars.mapMarker,pinOrCustom=mw_map_vars.pin,pinImage=mw_map_vars.pinImage,radius=mw_map_vars.radiusDistance,radiusColour=mw_map_vars.radiusColour,mile=1609.344;pluginUrl=mw_map_vars.pluginUrl,addresses=mw_map_vars.addressArray,jQuery(document).ready(function(e){function a(){var a=e("#map-wrapper"),s=e(window).height(),r=a.offset().top,l=e(window).scrollTop(),i=r-s;a.length>0&&parseInt(l)>parseInt(i)&&(t&&addresses.length>1?(getMultiMap(),t=!1):t&&(getMap(),t=!1))}var t=!0;a(),e(window).scroll(function(){a()})});